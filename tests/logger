# src/app/utils/logger.py
import logging
import sys

class LevelColorFormatter(logging.Formatter):
    COLORS = {
        "DEBUG":   "\033[36m",  # cyan
        "INFO":    "\033[32m",  # green
        "WARNING": "\033[33m",  # yellow
        "ERROR":   "\033[31m",  # red
        "CRITICAL":"\033[35m",  # magenta
    }
    RESET = "\033[0m"

    def format(self, record):
        color = self.COLORS.get(record.levelname, "")
        msg = super().format(record)
        return f"{color}{msg}{self.RESET}"

handler = logging.StreamHandler(sys.stdout)
handler.setFormatter(LevelColorFormatter("%(levelname)s | %(filename)s | %(message)s"))

logging.basicConfig(level=logging.INFO, handlers=[handler])
logging.getLogger("uvicorn").setLevel(logging.WARNING)
logging.getLogger("fastapi").setLevel(logging.WARNING)

logger = logging.getLogger()  # root
